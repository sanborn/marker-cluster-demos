<html>
  <head>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.3.0"></script>
    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="leaflet.markercluster.js"></script>
    <link rel="stylesheet" href="MarkerCluster.Default.css" />
    <link rel="stylesheet" href="MarkerCluster.css" />
    <style type='text/css'>
      body {
          padding: 0;
          margin: 0;
      }
      html, body, #map {
          height: 100%;
      }
    </style>
  <body>

    <div id='map'></div>

    <script>
      var map = L.map('map').setView([38.58, -104.81], 10);

      map.addLayer(new L.StamenTileLayer("toner"));

      var point_url = "http://localhost:8080/geoserver/sanborn/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=sanborn%3Atest_points&outputformat=text/javascript"

      //$.getJSON('./points.json', function(data) {
      $.ajax({
          type: 'GET',
          url: point_url,
          async: false,
          jsonpCallback: 'parseResponse',
          contentType: 'application/json',
          dataType: 'jsonp',
          success: function(data) {
            var markers = new L.MarkerClusterGroup();
            var points_layer = L.geoJson(data);
            markers.addLayer(points_layer);
            map.addLayer(markers);
          }
      });
    </script>
  </body>
</html>
